<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BaZi Pro Ultra Expert 2577</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <style>
        :root { --gold: #ffd700; --accent: #ff4b2b; --glass: rgba(255, 255, 255, 0.12); }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color: white; padding: 15px; min-height: 100vh; }
        .container { max-width: 650px; margin: 0 auto; }
        h1 { text-align: center; margin: 20px 0; color: var(--gold); text-shadow: 0 0 15px rgba(255,215,0,0.4); font-size: 1.8em; }
        
        .input-card { background: var(--glass); backdrop-filter: blur(15px); padding: 25px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); margin-bottom: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-size: 0.9em; color: #ffd700; font-weight: bold; }
        input { width: 100%; padding: 14px; border-radius: 12px; border: none; font-size: 16px; background: #fff; color: #333; outline: none; }
        
        .btn-calc { width: 100%; padding: 18px; border: none; border-radius: 15px; background: linear-gradient(45deg, #ff416c, #ff4b2b); color: white; font-weight: bold; font-size: 18px; cursor: pointer; transition: 0.4s; box-shadow: 0 5px 20px rgba(255, 65, 108, 0.4); }
        .btn-calc:hover { transform: scale(1.02); filter: brightness(1.1); }

        #resultArea { display: none; margin-top: 25px; animation: slideUp 0.6s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        .header-card { text-align: center; background: linear-gradient(to bottom, rgba(255,215,0,0.1), transparent); padding: 25px; border-radius: 20px; border: 1px solid var(--gold); margin-bottom: 20px; }
        .bazi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 25px 0; }
        .pillar { background: rgba(0,0,0,0.6); padding: 15px 5px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,215,0,0.3); transition: 0.3s; }
        .pillar:hover { border-color: var(--gold); background: rgba(0,0,0,0.8); }
        .stem { font-size: 1.1em; font-weight: 800; color: var(--gold); display: block; margin-bottom: 6px; }
        .branch { font-size: 0.85em; color: #fff; display: block; border-top: 1px solid rgba(255,255,255,0.15); padding-top: 6px; font-weight: 500; }
        .p-label { font-size: 0.65em; text-transform: uppercase; color: #00d2ff; margin-top: 10px; letter-spacing: 1px; }

        .card { background: var(--glass); padding: 22px; border-radius: 18px; margin-bottom: 18px; border-left: 6px solid var(--gold); position: relative; overflow: hidden; }
        .card-h { font-weight: 800; margin-bottom: 15px; color: var(--gold); font-size: 1.15em; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid rgba(255,215,0,0.2); padding-bottom: 8px; }
        
        .dynamic-list { list-style: none; }
        .dynamic-list li { font-size: 0.95em; margin-bottom: 12px; padding-left: 28px; position: relative; color: #f0f0f0; line-height: 1.5; }
        .dynamic-list li::before { content: '‚óà'; position: absolute; left: 0; color: var(--gold); font-size: 1.2em; top: -2px; }

        .btn-wa { width: 100%; padding: 20px; border: none; border-radius: 15px; background: #25D366; color: white; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; font-size: 17px; margin: 30px 0 60px 0; box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4); transition: 0.3s; }
        .btn-wa:hover { transform: translateY(-3px); filter: brightness(1.1); }

        @media (max-width: 550px) { .bazi-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; } }
    </style>
</head>
<body>

<div class="container">
    <h1>üîÆ BaZi Expert Pro 2577</h1>
    
    <div class="input-card">
        <div class="form-group"><label>Nama Lengkap</label><input type="text" id="name" placeholder="Contoh: Budi Santoso"></div>
        <div class="form-group"><label>Tanggal Lahir (Masehi)</label><input type="date" id="dob"></div>
        <div class="form-group"><label>Jam Lahir</label><input type="time" id="tob"></div>
        <button class="btn-calc" onclick="hitungBazi()">BACA TAKDIR SEKARANG</button>
    </div>

    <div id="resultArea">
        <div class="header-card">
            <h2 id="shioTitle" style="color:var(--gold); font-size: 1.8em; margin-bottom: 8px;"></h2>
            <p id="lunarDateDisplay" style="font-weight: bold; color: #fff;"></p>
            <p id="userInputDisplay" style="font-size: 0.85em; color: #00d2ff; margin-top: 8px; background: rgba(0,210,255,0.1); display: inline-block; padding: 4px 12px; border-radius: 20px;"></p>
        </div>

        <div class="bazi-grid" id="chart"></div>

        <div id="fullPrediction"></div>

        <button class="btn-wa" onclick="keWhatsApp()">üí¨ KIRIM LAPORAN LENGKAP KE WHATSAPP</button>
    </div>
</div>

<script>
    const MAPPING = {
        'Áî≤': 'Kayu Yang', '‰πô': 'Kayu Yin', '‰∏ô': 'Api Yang', '‰∏Å': 'Api Yin', 'Êàä': 'Tanah Yang',
        'Â∑±': 'Tanah Yin', 'Â∫ö': 'Logam Yang', 'Ëæõ': 'Logam Yin', 'Â£¨': 'Air Yang', 'Áô∏': 'Air Yin',
        'Â≠ê': 'Tikus (Air)', '‰∏ë': 'Kerbau (Tanah)', 'ÂØÖ': 'Macan (Kayu)', 'ÂçØ': 'Kelinci (Kayu)', 
        'Ëæ∞': 'Naga (Tanah)', 'Â∑≥': 'Ular (Api)', 'Âçà': 'Kuda (Api)', 'Êú™': 'Kambing (Tanah)', 
        'Áî≥': 'Monyet (Logam)', 'ÈÖâ': 'Ayam (Logam)', 'Êàå': 'Anjing (Tanah)', '‰∫•': 'Babi (Air)'
    };

    const MASTER_DB = {
        'Kayu Yang': {
            kepribadian: ['Pemimpin visioner dengan prinsip baja yang sulit digoyahkan.', 'Memiliki integritas tinggi dan kejujuran yang terkadang terlalu blak-blakan.', 'Sangat protektif terhadap orang tersayang, seperti pohon besar yang menaungi.', 'Terkadang terlalu kaku dan sulit beradaptasi dengan perubahan mendadak.'],
            keuangan: ['Rejeki datang dari kepemilikan aset fisik dan properti jangka panjang.', 'Kemampuan mengelola dana besar sangat mumpuni di tahun 2577 ini.', 'Hindari meminjamkan uang tanpa jaminan kepada teman dekat.', 'Keuangan akan melonjak drastis melalui proyek yang melibatkan banyak orang.'],
            karier: ['Sangat sukses di posisi Manajerial, Direktur, atau pemilik bisnis.', 'Bidang konstruksi, furnitur, dan perkebunan adalah ladang hoki Anda.', 'Mampu mengelola tekanan tinggi dengan ketenangan luar biasa.', 'Karier akan stabil jika Anda bersedia mendengarkan masukan bawahan.'],
            asmara: ['Mencari pasangan yang setia dan memiliki visi hidup yang sama.', 'Cenderung dominan dalam hubungan namun sangat bertanggung jawab.', 'Pasangan akan merasa sangat aman dan terlindungi di samping Anda.', 'Jodoh terbaik adalah mereka yang memiliki Shio Macan atau Kuda.'],
            kesehatan: ['Perhatikan kesehatan hati dan sistem metabolisme tubuh.', 'Disarankan rutin melakukan aktivitas luar ruangan di pagi hari.', 'Kurangi konsumsi makanan yang terlalu berminyak.', 'Istirahat yang cukup adalah kunci vitalitas Anda tahun ini.']
        },
        'Kayu Yin': {
            kepribadian: ['Diplomatis, cerdas secara emosional, dan sangat mudah beradaptasi.', 'Memiliki intuisi tajam dalam membaca situasi dan peluang tersembunyi.', 'Cenderung menghindari konflik langsung namun lihai dalam bernegosiasi.', 'Seringkali merasa bimbang jika dihadapkan pada terlalu banyak pilihan.'],
            keuangan: ['Sumber uang berasal dari kreativitas dan jaringan pertemanan luas.', 'Sangat beruntung dalam perdagangan retail dan bisnis berbasis jasa.', 'Kecerdasan finansial Anda membuat tabungan terus tumbuh perlahan.', 'Hoki besar menanti di paruh kedua tahun ini melalui investasi digital.'],
            karier: ['Sukses di bidang PR, Marketing, Desain Kreatif, atau Diplomasi.', 'Mampu bekerja sama dalam tim dan menjadi penengah yang baik.', 'Karier melesat karena kemampuan Anda menyenangkan hati atasan.', 'Cocok bekerja di industri yang dinamis dan penuh inovasi.'],
            asmara: ['Sangat romantis, peka, dan tahu cara memperlakukan pasangan.', 'Membutuhkan perhatian ekstra dan dukungan emosional yang konstan.', 'Hubungan asmara akan penuh warna dan kejutan manis harian.', 'Sangat cocok bersanding dengan Shio Babi atau Kelinci.'],
            kesehatan: ['Jaga kesehatan saraf dan sistem pernapasan Anda.', 'Yoga atau meditasi sangat disarankan untuk menjaga ketenangan pikiran.', 'Hindari tidur terlalu larut karena mempengaruhi daya ingat.', 'Asupan vitamin B kompleks sangat penting bagi energi Anda.']
        },
        'Api Yang': {
            kepribadian: ['Hangat, ceria, dan memiliki aura bintang yang menarik perhatian.', 'Sangat terbuka, jujur, dan tidak suka menyembunyikan rahasia apapun.', 'Memiliki antusiasme tinggi yang mampu membakar semangat orang lain.', 'Cenderung impulsif dan terkadang terlalu cepat mengambil keputusan.'],
            keuangan: ['Uang masuk dengan cepat namun juga cenderung cepat keluar.', 'Hoki besar di industri hiburan, media, dan kegiatan sosial.', 'Disarankan mulai berinvestasi di aset yang tidak mudah dicairkan.', 'Rejeki nomplok sering datang di saat-saat yang tidak terduga.'],
            karier: ['Lahir sebagai pembicara publik, motivator, atau pemimpin pasar.', 'Berbakat dalam profesi yang menuntut Anda tampil di depan publik.', 'Karier Anda akan bersinar jika fokus pada satu bidang utama saja.', 'Mampu memimpin dengan visi yang menginspirasi banyak orang.'],
            asmara: ['Penuh gairah, ekspresif, dan sangat setia pada pasangan.', 'Menginginkan hubungan yang seru dan penuh petualangan fisik/mental.', 'Kejujuran adalah fondasi utama Anda dalam menjalin cinta.', 'Pasangan ideal berasal dari Shio Naga, Monyet, atau Tikus.'],
            kesehatan: ['Waspadai kesehatan jantung dan tekanan darah tinggi.', 'Kurangi asupan garam dan kafein yang berlebihan.', 'Olahraga kardio ringan sangat membantu menjaga kebugaran.', 'Pastikan tubuh tetap terhidrasi dengan air putih yang cukup.']
        }
        // Data elemen lain akan di-handle secara dinamis di script untuk efisiensi kode
    };

    // Tambahan Database untuk memastikan semua elemen ada
    const ELEMENTS = ['Api Yin', 'Tanah Yang', 'Tanah Yin', 'Logam Yang', 'Logam Yin', 'Air Yang', 'Air Yin'];
    ELEMENTS.forEach(el => {
        if(!MASTER_DB[el]) {
            MASTER_DB[el] = {
                kepribadian: [`Karakter kuat elemen ${el} yang unik dan berwibawa.`, 'Memiliki cara berpikir sistematis dan sangat terstruktur.', 'Sangat dihargai di lingkungan sosial karena kebijaksanaannya.', 'Mampu menyimpan rahasia dan menjadi pendengar yang baik.'],
                keuangan: [`Arus keuangan ${el} stabil dengan pertumbuhan yang menjanjikan.`, 'Hoki di bidang yang sesuai dengan elemen penolong Anda.', 'Keberuntungan finansial meningkat melalui manajemen risiko yang baik.', 'Disarankan tetap hemat di awal bulan untuk investasi besar.'],
                karier: [`Sangat kompeten di bidang yang membutuhkan konsistensi tinggi.`, 'Karier akan naik tajam jika berani mengambil tantangan baru.', 'Dihormati kolega karena dedikasi dan tanggung jawab kerja.', 'Cocok di posisi yang memerlukan analisis mendalam.'],
                asmara: ['Mencari pasangan yang bisa menghargai ruang pribadi Anda.', 'Hubungan asmara yang tenang dan jauh dari drama publik.', 'Cenderung menunjukkan cinta melalui tindakan nyata bukan kata.', 'Harmonis dengan elemen yang saling mendukung takdir Anda.'],
                kesehatan: ['Jaga stamina dengan konsumsi makanan bergizi seimbang.', 'Kesehatan fisik dipengaruhi oleh stabilitas emosional Anda.', 'Rutinitas olahraga ringan sangat baik untuk sirkulasi energi.', 'Jangan abaikan sinyal kelelahan dari tubuh Anda.']
            };
        }
    });

    function hitungBazi() {
        const nama = document.getElementById('name').value || "Sobat Bazi";
        const dStr = document.getElementById('dob').value;
        const tStr = document.getElementById('tob').value;
        if (!dStr || !tStr) return alert("Mohon lengkapi data lahir Anda!");

        const d = new Date(dStr);
        const solar = Solar.fromYmd(d.getFullYear(), d.getMonth() + 1, d.getDate());
        const lunar = solar.getLunar();
        const bazi = lunar.getEightChar();
        const today = new Date();
        const seed = today.getDate();

        const kongziliYear = lunar.getYear() + 551;
        const shioDetail = MAPPING[lunar.getYearZhi()];

        document.getElementById('shioTitle').innerText = "Shio " + shioDetail;
        document.getElementById('lunarDateDisplay').innerText = `Imlek: Tgl ${lunar.getDay()} Bln ${lunar.getMonth()} Thn ${kongziliYear}`;
        document.getElementById('userInputDisplay').innerText = `Profil: ${nama} | ${tStr} WIB`;

        const dmKey = MAPPING[bazi.getDayGan()];
        const r = MASTER_DB[dmKey];

        // Layout Pilar
        const p = [
            {l:"Jam", s:MAPPING[bazi.getTimeGan()], b:MAPPING[bazi.getTimeZhi()]},
            {l:"Hari", s:MAPPING[bazi.getDayGan()], b:MAPPING[bazi.getDayZhi()]},
            {l:"Bulan", s:MAPPING[bazi.getMonthGan()], b:MAPPING[bazi.getMonthZhi()]},
            {l:"Tahun", s:MAPPING[bazi.getYearGan()], b:MAPPING[bazi.getYearZhi()]}
        ];
        document.getElementById('chart').innerHTML = p.map(i=>`<div class="pillar"><span class="stem">${i.s}</span><span class="branch">${i.b}</span><div class="p-label">${i.l}</div></div>`).join('');

        // Tampilkan Ramalan Raksasa
        document.getElementById('fullPrediction').innerHTML = `
            <div class="card"><div class="card-h">üåü Karakter & Potensi (${dmKey})</div><ul class="dynamic-list">${r.kepribadian.map(li=>`<li>${li}</li>`).join('')}</ul></div>
            <div class="card"><div class="card-h">üí∞ Prediksi Keuangan 2577</div><ul class="dynamic-list">${r.keuangan.map(li=>`<li>${li}</li>`).join('')}</ul></div>
            <div class="card"><div class="card-h">üíº Karier & Pekerjaan</div><ul class="dynamic-list">${r.karier.map(li=>`<li>${li}</li>`).join('')}</ul></div>
            <div class="card"><div class="card-h">‚ù§Ô∏è Asmara & Jodoh</div><ul class="dynamic-list">${r.asmara.map(li=>`<li>${li}</li>`).join('')}</ul></div>
            <div class="card"><div class="card-h">ü©∫ Kesehatan & Vitalitas</div><ul class="dynamic-list">${r.kesehatan.map(li=>`<li>${li}</li>`).join('')}</ul></div>
        `;

        document.getElementById('resultArea').style.display = 'block';

        // Susun Pesan WA (Sangat Detail)
        window.waReport = `*LAPORAN LENGKAP BAZI EXPERT 2577*\n` +
            `===========================\n` +
            `Nama: ${nama}\n` +
            `Lahir: ${dStr} (${tStr})\n` +
            `Shio: ${shioDetail}\n` +
            `Elemen DM: ${dmKey}\n` +
            `===========================\n\n` +
            `*POTENSI DIRI:*\n- ${r.kepribadian.join('\n- ')}\n\n` +
            `*KEUANGAN & REJEKI:*\n- ${r.keuangan.join('\n- ')}\n\n` +
            `*KARIER & BISNIS:*\n- ${r.karier.join('\n- ')}\n\n` +
            `*ASMARA:* ${r.asmara[0]}\n\n` +
            `_Dicetak otomatis oleh BaZi Expert Pro_`;
    }

    function keWhatsApp() {
        if(!window.waReport) return;
        window.open(`https://wa.me/?text=${encodeURIComponent(window.waReport)}`, '_blank');
    }
</script>
</body>
</html>
